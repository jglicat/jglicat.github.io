<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>windows命令行美化</title>
      <link href="/2021/12/09/windows-ming-ling-xing-mei-hua/"/>
      <url>/2021/12/09/windows-ming-ling-xing-mei-hua/</url>
      
        <content type="html"><![CDATA[<p><code>颜值即正义</code></p><p>众所周知windows自带的cmd和powershell又丑又难用，所以需要改进一下</p><h1 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h1><h2 id="Windows-Terminal"><a href="#Windows-Terminal" class="headerlink" title="Windows Terminal"></a>Windows Terminal</h2><p><a href="https://docs.microsoft.com/zh-cn/windows/terminal/">Windows Terminal</a>是微软推出的命令行工具，还是很好用的，推荐用<a href="https://www.microsoft.com/zh-cn/p/windows-terminal/9n0dx20hk701?rtc=1&amp;activetab=pivot:overviewtab">Store</a>安装，比较省心。</p><h2 id="Powershell"><a href="#Powershell" class="headerlink" title="Powershell"></a>Powershell</h2><p>win10/11自带的还是Powershell 5，略老，目前最新的版本是<a href="https://docs.microsoft.com/zh-cn/powershell/scripting/overview?view=powershell-7.2">7.2</a>，下载安装即可，建议msi文件安装。安装完成后会自动整合进Windows Terminal。</p><h1 id="美化配置"><a href="#美化配置" class="headerlink" title="美化配置"></a>美化配置</h1><h2 id="下载字体"><a href="#下载字体" class="headerlink" title="下载字体"></a>下载字体</h2><p>首先得整点支持Nerd-fonts的字体，用来在终端下显示各种图标，比如<a href="https://link.zhihu.com/?target=https://github.com/ryanoasis/nerd-fonts/releases/download/v2.1.0/FiraCode.zip">Fira Code Nerd Font</a>。</p><h2 id="安装Powershell插件"><a href="#安装Powershell插件" class="headerlink" title="安装Powershell插件"></a>安装Powershell插件</h2><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># 1. 安装 PSReadline 包，该插件可以让命令行很好用，类似 zsh</span><span class="token function">Install-Module</span> <span class="token operator">-</span>Name PSReadLine  <span class="token operator">-</span>Scope CurrentUser<span class="token comment"># 2. 安装 posh-git 包，让你的 git 更好用</span><span class="token function">Install-Module</span> posh<span class="token operator">-</span>git  <span class="token operator">-</span>Scope CurrentUser<span class="token comment"># 3. 安装 oh-my-posh 包，让你的命令行更酷炫、优雅</span><span class="token function">Install-Module</span> oh<span class="token operator">-</span>my<span class="token operator">-</span>posh <span class="token operator">-</span>Scope CurrentUser<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="配置-Windows-Terminal"><a href="#配置-Windows-Terminal" class="headerlink" title="配置 Windows Terminal"></a>配置 Windows Terminal</h2><p>在json文件里更改</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"acrylicOpacity"</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>    <span class="token property">"closeOnExit"</span><span class="token operator">:</span> <span class="token string">"graceful"</span><span class="token punctuation">,</span>    <span class="token property">"colorScheme"</span><span class="token operator">:</span> <span class="token string">"Homebrew"</span><span class="token punctuation">,</span>    <span class="token property">"commandline"</span><span class="token operator">:</span> <span class="token string">"C:/Program Files/PowerShell/7/pwsh.exe -nologo"</span><span class="token punctuation">,</span>    <span class="token property">"cursorColor"</span><span class="token operator">:</span> <span class="token string">"#FFFFFF"</span><span class="token punctuation">,</span>    <span class="token property">"cursorShape"</span><span class="token operator">:</span> <span class="token string">"bar"</span><span class="token punctuation">,</span>    <span class="token property">"experimental.retroTerminalEffect"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token property">"font"</span><span class="token operator">:</span>     <span class="token punctuation">{</span>        <span class="token property">"face"</span><span class="token operator">:</span> <span class="token string">"FiraCode Nerd Font"</span><span class="token punctuation">,</span>        <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">11</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"guid"</span><span class="token operator">:</span> <span class="token string">"{574e775e-4f2a-5b96-ac1e-a2962a402336}"</span><span class="token punctuation">,</span>    <span class="token property">"hidden"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token property">"historySize"</span><span class="token operator">:</span> <span class="token number">9001</span><span class="token punctuation">,</span>    <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token string">"ms-appx:///ProfileIcons/pwsh.png"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"PowerShell"</span><span class="token punctuation">,</span>    <span class="token property">"padding"</span><span class="token operator">:</span> <span class="token string">"5, 5, 20, 25"</span><span class="token punctuation">,</span>    <span class="token property">"snapOnInput"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"Windows.Terminal.PowershellCore"</span><span class="token punctuation">,</span>    <span class="token property">"startingDirectory"</span><span class="token operator">:</span> <span class="token string">"C:/File/OneDrive/code"</span><span class="token punctuation">,</span>    <span class="token property">"useAcrylic"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后添加配色</p><pre class="line-numbers language-none"><code class="language-none">{    "name": "Homebrew",    "black": "#000000",    "red": "#FC5275",    "green": "#00a600",    "yellow": "#999900",    "blue": "#6666e9",    "purple": "#b200b2",    "cyan": "#00a6b2",    "white": "#bfbfbf",    "brightBlack": "#666666",    "brightRed": "#e50000",    "brightGreen": "#00d900",    "brightYellow": "#e5e500",    "brightBlue": "#0000ff",    "brightPurple": "#e500e5",    "brightCyan": "#00e5e5",    "brightWhite": "#e5e5e5",    "background": "#283033",    "foreground": "#00ff00"}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>配色也可以从<a href="https://windowsterminalthemes.dev/">这里</a>找</p><h2 id="添加Powershell-启动参数"><a href="#添加Powershell-启动参数" class="headerlink" title="添加Powershell 启动参数"></a>添加Powershell 启动参数</h2><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">notepad<span class="token punctuation">.</span>exe <span class="token variable">$Profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>复制进去</p><pre class="line-numbers language-none"><code class="language-none">#------------------------------- Import Modules BEGIN -------------------------------# 引入 posh-gitImport-Module posh-git# 引入 oh-my-poshImport-Module oh-my-posh# 引入 ps-read-lineImport-Module PSReadLine# 设置 PowerShell 主题# Set-PoshPrompt ysSet-PoshPrompt unicorn#------------------------------- Import Modules END   -------------------------------#-------------------------------  Set Hot-keys BEGIN  -------------------------------# 设置预测文本来源为历史记录Set-PSReadLineOption -PredictionSource History# 每次回溯输入历史，光标定位于输入内容末尾Set-PSReadLineOption -HistorySearchCursorMovesToEnd# 设置 Tab 为菜单补全和 IntellisenseSet-PSReadLineKeyHandler -Key "Tab" -Function MenuComplete# 设置 Ctrl+d 为退出 PowerShellSet-PSReadlineKeyHandler -Key "Ctrl+d" -Function ViExit# 设置 Ctrl+z 为撤销Set-PSReadLineKeyHandler -Key "Ctrl+z" -Function Undo# 设置向上键为后向搜索历史记录Set-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward# 设置向下键为前向搜索历史纪录Set-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward#-------------------------------  Set Hot-keys END    -------------------------------#-------------------------------    Functions BEGIN   -------------------------------# Python 直接执行$env:PATHEXT += ";.py"# 更新系统组件function Update-Packages {# update pipWrite-Host "Step 1: 更新 pip" -ForegroundColor Magenta -BackgroundColor Cyan$a = pip list --outdated$num_package = $a.Length - 2for ($i = 0; $i -lt $num_package; $i++) {$tmp = ($a[2 + $i].Split(" "))[0]pip install -U $tmp}# update TeX Live$CurrentYear = Get-Date -Format yyyyWrite-Host "Step 2: 更新 TeX Live" $CurrentYear -ForegroundColor Magenta -BackgroundColor Cyantlmgr update --selftlmgr update --all# update ChocoloteyWrite-Host "Step 3: 更新 Chocolatey" -ForegroundColor Magenta -BackgroundColor Cyanchoco outdated}#-------------------------------    Functions END     -------------------------------#-------------------------------   Set Alias BEGIN    -------------------------------# 1. 编译函数 makefunction MakeThings {nmake.exe $args -nologo}Set-Alias -Name make -Value MakeThings# 2. 更新系统 os-updateSet-Alias -Name os-update -Value Update-Packages# 3. 查看目录 ls &amp; llfunction ListDirectory {(Get-ChildItem).NameWrite-Host("")}Set-Alias -Name ls -Value ListDirectorySet-Alias -Name ll -Value Get-ChildItem# 4. 打开当前工作目录function OpenCurrentFolder {param(# 输入要打开的路径# 用法示例：open C:\# 默认路径：当前工作文件夹$Path = '.')Invoke-Item $Path}Set-Alias -Name open -Value OpenCurrentFolder#-------------------------------    Set Alias END     -------------------------------#-------------------------------   Set Network BEGIN    -------------------------------# 1. 获取所有 Network Interfacefunction Get-AllNic {Get-NetAdapter | Sort-Object -Property MacAddress}Set-Alias -Name getnic -Value Get-AllNic# 2. 获取 IPv4 关键路由function Get-IPv4Routes {Get-NetRoute -AddressFamily IPv4 | Where-Object -FilterScript {$_.NextHop -ne '0.0.0.0'}}Set-Alias -Name getip -Value Get-IPv4Routes# 3. 获取 IPv6 关键路由function Get-IPv6Routes {Get-NetRoute -AddressFamily IPv6 | Where-Object -FilterScript {$_.NextHop -ne '::'}}Set-Alias -Name getip6 -Value Get-IPv6Routes#-------------------------------    Set Network END     -------------------------------<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后重启终端，Get-PoshThemes查看主题，选择一个自己喜欢的替换Set-PoshPrompt的值，具体配置可以在</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token operator">%</span>HOMEPATH<span class="token operator">%</span> \Documents\PowerShell\Modules\oh<span class="token operator">-</span>my<span class="token operator">-</span>posh\themes<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>里设置</p><hr><p>参考网址：</p><p><a href="https://zhuanlan.zhihu.com/p/137595941">https://zhuanlan.zhihu.com/p/137595941</a></p><p><a href="https://drrany.github.io/wt/#%E9%9A%90%E8%97%8F%E4%B8%BB%E6%9C%BA%E5%90%8D">https://drrany.github.io/wt/#%E9%9A%90%E8%97%8F%E4%B8%BB%E6%9C%BA%E5%90%8D</a></p><p><a href="https://blog.csdn.net/Y1575071736/article/details/120616233">https://blog.csdn.net/Y1575071736/article/details/120616233</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux设置后台任务</title>
      <link href="/2021/12/09/linux-she-zhi-hou-tai-ren-wu/"/>
      <url>/2021/12/09/linux-she-zhi-hou-tai-ren-wu/</url>
      
        <content type="html"><![CDATA[<h1 id="设置后台任务（以scp为例）"><a href="#设置后台任务（以scp为例）" class="headerlink" title="设置后台任务（以scp为例）"></a>设置后台任务（以scp为例）</h1><h2 id="正常执行命令"><a href="#正常执行命令" class="headerlink" title="正常执行命令"></a>正常执行命令</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@oradb30 ~]# scp -r /u01/media/Disk1/ 192.168.1.31:/u01/media/reverse mapping checking getaddrinfo for bogon failed - POSSIBLE BREAK-IN ATTEMPT!root@192.168.1.31's password: ...filegroup2.jar                                                                                                                                              100%   84KB  83.8KB/s   00:00    filegroup9.jar       <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="暂停"><a href="#暂停" class="headerlink" title="暂停"></a>暂停</h2><p>输入ctrl + z 暂停</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[1]+  Stopped                 scp -r /u01/media/Disk1/ 192.168.1.31:/u01/media/[root@oradb30 ~]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>此时查看jobs：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@oradb30 ~]# jobs[1]+  Stopped                 scp -r /u01/media/Disk1/ 192.168.1.31:/u01/media/[root@oradb30 ~]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="bg将其放入后台"><a href="#bg将其放入后台" class="headerlink" title="bg将其放入后台"></a>bg将其放入后台</h2><p>bg将该任务号放入后台:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@oradb30 media]# bg %1[1]+ scp -r Disk1/ 192.168.1.31:/u01/media/ &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>查看任务已经在后台运行:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@oradb30 media]# jobs[1]+  Running                 scp -r Disk1/ 192.168.1.31:/u01/media/ &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="disown-h-将这个作业忽略HUP信号"><a href="#disown-h-将这个作业忽略HUP信号" class="headerlink" title="disown -h 将这个作业忽略HUP信号"></a>disown -h 将这个作业忽略HUP信号</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@oradb30 media]# disown -h %1[root@oradb30 media]# jobs[1]+  Running                 scp -r Disk1/ 192.168.1.31:/u01/media/ &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>查看任务运行状态和父进程号:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@oradb30 media]# ps -ef|grep scproot     12704 12638  0 05:19 pts/0    00:00:01 scp -r Disk1  192.168.1.31 /u01/media/root     12705 12704  8 05:19 pts/0    00:00:17 /usr/bin/ssh -x -oForwardAgent no -oPermitLocalCommand no -oClearAllForwardings yes 192.168.1.31 scp -r -t /u01/media/root     12823 12638  0 05:22 pts/0    00:00:00 grep scp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ssh相关问题</title>
      <link href="/2021/12/09/ssh-xiang-guan-wen-ti/"/>
      <url>/2021/12/09/ssh-xiang-guan-wen-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo vim ~/.ssh/configHost 别名名称    HostName IP或者域名    Port 端口    User 用户名    IdentitiesOnly yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="配置免密登录"><a href="#配置免密登录" class="headerlink" title="配置免密登录"></a>配置免密登录</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 先在客户端生成密钥对（一路回车就行）ssh-keygen# 上传公钥到服务器ssh-copy-id -i ~/.ssh/id_rsa.pub 用户名@IP# 如果已配置别名，也可以ssh-copy-id -i ~/.ssh/id_rsa.pub 别名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
